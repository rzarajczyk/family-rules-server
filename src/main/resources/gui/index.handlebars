<li class="fr-collapsible" data-instanceid="{{instanceId}}">
    <div class="fr-header collapsible-header">
        <img class="fr-image-icon" src="{{#if icon.type}}data:{{icon.type}};base64,{{icon.data}}{{else}}default-icon.png{{/if}}" alt="Device" >
        <div class="fr-name-row instance-name">
            <span class="fr-name-text">{{instanceName}}</span>

            <!-- badges -->
            <span class="new badge" style="width: 6rem" data-badge-caption="">{{#formatScreenTime}}{{screenTimeSeconds}}{{/formatScreenTime}}</span>
            {{#if forcedDeviceState}}
                <span class="new badge orange mr-2" data-badge-caption="">
                    <svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 -960 960 960" width="12px" fill="var(--md-sys-color-on-primary)">{{{forcedDeviceState.icon}}}</svg>
                    {{forcedDeviceState.title}}
                </span>
            {{/if}}
            {{#unless forcedDeviceState}}
                <span class="new badge green mr-2" data-badge-caption="">
                    <svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 -960 960 960" width="12px" fill="var(--md-sys-color-on-primary)">
                        <path d="m354-287 126-76 126 77-33-144 111-96-146-13-58-136-58 135-146 13 111 97-33 143ZM233-120l65-281L80-590l288-25 112-265 112 265 288 25-218 189 65 281-247-149-247 149Zm247-350Z" />
                    </svg>
                    Automatic: {{automaticDeviceState.title}}
                </span>
            {{/unless}}
            {{#if online}}
                <span class="badge mr-2 is-online" data-badge-caption=""><i class="material-icons tiny">online_prediction</i></span>
            {{/if}}
        </div>
    </div>
    <div class="fr-body collapsible-body">
        <div class="fr-data-row instance-report">
            <ul class="collection">
                {{#each appUsageSeconds}}
                    <li class="collection-item app-usage-item" data-app-path="{{path}}">
                        <div class="app-info">
                            <img src="{{#if iconBase64}}data:image/png;base64,{{iconBase64}}{{else}}default-icon.png{{/if}}" 
                                 alt="{{appName}}" 
                                 class="app-icon circle">
                            <div class="app-details">
                                <span class="app-name clickable-app-name" 
                                      data-app-name="{{#if appName}}{{appName}}{{else}}{{name}}{{/if}}"
                                      data-app-path="{{path}}">{{#if appName}}{{appName}}{{else}}{{name}}{{/if}}</span>
                                <div class="app-group-labels">
                                    {{#each appGroups}}
                                        <span class="app-group-label" 
                                              data-group-id="{{id}}"
                                              style="background-color: {{color}}; color: {{textColor}};">
                                            {{name}}
                                            <i class="material-icons tiny remove-group-btn">close</i>
                                        </span>
                                    {{/each}}
                                    <button class="add-group-btn" style="visibility: hidden;">
                                        <i class="material-icons tiny">add</i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <span class="secondary-content">
                            {{#if online}}
                                <span class="mr-2 is-online"><i class="material-icons tiny">online_prediction</i></span>
                            {{/if}}
                            {{#formatScreenTime}}{{usageSeconds}}{{/formatScreenTime}}
                        </span>
                    </li>
                {{/each}}
            </ul>
        </div>
        <div class="fr-buttons-row instance-buttons">
            <a class="fr-small btn client-info">Client information</a>
            <a class="fr-large btn client-info"><i class="material-icons">info</i></a>
            <a class="fr-small btn client-edit">Edit</a>
            <a class="fr-large btn client-edit"><i class="material-icons">edit</i></a>
            <a class="fr-small btn client-delete">Delete</a>
            <a class="fr-large btn client-delete"><i class="material-icons">delete</i></a>
            <a class="fr-small btn view-usage">Usage</a>
            <a class="fr-large btn view-usage"><i class="material-icons">bar_chart</i></a>
            <a class="btn outlined right change-state">Change device state</a>
            <a class="btn outlined right edit-schedule">
                <i class="material-icons hide-on-small-only">calendar_month</i>
                <span class="hide-on-med-and-up">Edit schedule</span>
            </a>
        </div>
    </div>
</li>